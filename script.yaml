living_room_cable_input:
  alias: Cable Input
  sequence:
    - service: switch.broadlink_send_packet_10_0_0_4
      data:
        packet:
          - !secret cable_input_ir
          - !secret cable_input_ir
living_room_xbox_input:
  alias: Xbox Input
  sequence:
    - service: switch.broadlink_send_packet_10_0_0_4
      data:
        packet:
          - !secret xbox_input_ir
          - !secret xbox_input_ir
living_room_chromecast_input:
  alias: Chromecast Input
  sequence:
    - service: switch.broadlink_send_packet_10_0_0_4
      data:
        packet:
          - !secret chromecast_input_ir
          - !secret chromecast_input_ir
living_room_volume:
  alias: Living Room Volume
  sequence:
    - service: switch.broadlink_send_packet_10_0_0_4
      data:
        packet:
          - !secret living_room_volume_ir
living_room_tv_on:
  sequence:
    - condition: state
      entity_id: input_boolean.living_room_tv
      state: 'off'
    - service: switch.broadlink_send_packet_10_0_0_4
      data:
        packet:
          - !secret living_room_tv_ir_on
          - !secret living_room_tv_ir_on
          - !secret living_room_tv_ir_on
          - !secret living_room_soundbar_ir
          - !secret living_room_soundbar_ir
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.living_room_tv
living_room_tv_off:
  sequence:
    - condition: state
      entity_id: input_boolean.living_room_tv
      state: 'on'
    - service: switch.broadlink_send_packet_10_0_0_4
      data:
        packet:
          - !secret living_room_tv_ir_off
          - !secret living_room_tv_ir_off
          - !secret living_room_tv_ir_off
          - !secret living_room_soundbar_ir
          - !secret living_room_soundbar_ir
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.living_room_tv
bedroom_volume:
  alias: Bedroom Volume
  sequence:
    - service: switch.broadlink_send_packet_10_0_0_11
      data:
        packet:
          - !secret bedroom_volume_ir
bedroom_tv_on:
  sequence:
    - condition: state
      entity_id: input_boolean.bedroom_tv
      state: 'off'
    - service: switch.broadlink_send_packet_10_0_0_11
      data:
        packet:
          - !secret bedroom_tv_ir_on
          - !secret bedroom_tv_ir_on
          - !secret bedroom_tv_ir_on
          - !secret bedroom_soundbar_ir
          - !secret bedroom_soundbar_ir
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.bedroom_tv
bedroom_tv_off:
  sequence:
    - condition: state
      entity_id: input_boolean.bedroom_tv
      state: 'on'
    - service: switch.broadlink_send_packet_10_0_0_11
      data:
        packet:
          - !secret bedroom_tv_ir_off
          - !secret bedroom_tv_ir_off
          - !secret bedroom_tv_ir_off
          - !secret bedroom_soundbar_ir
          - !secret bedroom_soundbar_ir
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.bedroom_tv
goal_horn:
  alias: Goal Lamp
  sequence:
    - service: switch.broadlink_send_packet_10_0_0_4
      data:
        packet:
          - !secret goal_lamp_ir
          - !secret goal_lamp_ir
          - !secret goal_lamp_ir
    - service: light.turn_on
      data:
        entity_id: group.living_room_lamps
        effect: "Alarm"
    - service: xiaomi_aqara.play_ringtone
      data:
        gw_mac: !secret xiaomi1_mac
        ringtone_id: 10002
        ringtone_vol: 80
    - delay:
        seconds: 30
    - service: light.turn_on
      data:
        entity_id: group.living_room_lamps
        effect: "Stop"

learnir_lr:
  alias: Learn IR Code Living Room
  sequence:
    - service: switch.broadlink_learn_command_10_0_0_4

learnir_br:
  alias: Learn IR Code Bedroom
  sequence:
    - service: switch.broadlink_learn_command_10_0_0_11

bedtime:
  sequence:
    - service: switch.turn_off
      entity_id: switch.kitchen_light
    - service: switch.turn_off
      entity_id: switch.living_room_light
    - service: switch.turn_off
      entity_id: switch.bedroom_light
    - service: switch.turn_off
      entity_id: switch.living_room_tv
    - service: switch.turn_off
      entity_id: switch.bedroom_tv
    - service: light.turn_off
      entity_id: group.living_room_lamps

google_home_sound:
  sequence:
    - service: media_player.play_media
      data:
        entity_id: "media_player.living_room_home"
        media_content_type: "MUSIC"
      data_template:
        media_content_id: "http://10.0.0.6:8123/local/{{ file }}"

google_home_voice:
  sequence:
    - service: tts.google_say
      data:
        entity_id: media_player.living_room_home
      data_template:
        message: "{{ message }}"

assistant_voice:
  sequence:
    - service: mqtt.publish
      data_template:
        payload: "{{ message }}"
        topic: "assistant/{{ room }}/tts"

assistant_broadcast:
  sequence:
    - service: mqtt.publish
      data_template:
        payload: "{{ message }}:{{ source }}"
        topic: "assistant/broadcast"
